#!/bin/sh

set -e

echo "ğŸ” Running pre-push checks... ğŸ”"

# Load NVM if available (useful for managing Node.js versions)
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

# Ensure `pnpm` is available
echo "Checking if pnpm is available..."
if ! command -v pnpm >/dev/null 2>&1; then
    echo "âŒ pnpm not found! Please ensure pnpm is installed and available in PATH."
    exit 1
fi

echo "Running typecheck..."
pnpm typecheck

echo "Running full lint..."
pnpm lint

echo "ğŸ‘ Pre-push checks passed."
